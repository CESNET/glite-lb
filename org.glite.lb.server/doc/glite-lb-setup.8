.TH GLITE-LB-SETUP 19 "November 2012" "EMI Project" "Logging&Bookkeeping"

.SH NAME
glite-lb-setup - script for setup L&B

.SH SYNOPSIS
\fBglite-lb-setup\fR [\fIOPTIONS\fR] [\fIACTION...\fR]

.SH DESCRIPTION
Script \fBglite-lb-setup\fR setups L&B server based on environment and sourced files. Setup is divided into tasks: \fBACTIONS\fR.

.SH OPTIONS
.TP
\fB\-q\fR, \fP--quiet\fR
Print only the errors.

.TP
\fB\-c\fR, \fP--check\fR
Check availability of the database (if setup has been already performed). If there are no other \fBACTIONS\fR listed, no default actions are performed and \fBglite-lb-setup\fR will exit immediately with 0 return code (if database exists) or 1 (in other cases).

.TP
\fB\-l\fR, \fP--list\fR
List the \fBACTIONS\fR to be executed and exit. It can be used to see and/or select actions to be performed during setup. For example list the actions and omit setup of BDII:

 glite-lb-setup --list
 glite-lb-setup `glite-lb-setup --list | sed 's/bdii//'`

.TP
\fB-h\fR, \fP--help\fR
Display help.

.SH ACTIONS
\fBACTIONS\fR are individual tasks or groups of tasks to be performed during setup.

.TP
\fBall\fR (group)
All default actions. If no action is listed on command line, this action will be performed.

.TP
\fBnone\fR (group)
No actions.

.TP
\fByaim\fR (group)
Actions to be used when launching setup inside YAIM configurator. Some actions (like BDII or CRL) are already covered by YAIM, so they are not performed.

.TP
\fBlogger\fR (group)
Actions needed to setup only L&B logger. Only setup certificates, messaging and update actions will be performed.

.TP
\fBdb\fR
Check MySQL, enable MySQL configuration for L&B, setup the database and creates indexes. Migrate from L&B 3.x if needed. Start up of the MySQL server is handled in \fBstartup\fR, if enabled.

.TP
\fBcerts\fR
Check and copy host certificates for L&B services.

.TP
\fBmsg\fR
Configure EMI Messaging. It uses the \fBglite-lb-msg-config\fR utility.

.TP
\fBauthz\fR
Create \fI/etc/glite-lb/glite-lb-authz.conf\fR file based on all the configuration variables: type of L&B node ($GLITE_LB_TYPE), service DNs ($GLITE_LB_WMS_DN, $GLITE_LB_SUPER_USERS, $GLITE_LB_RTM_DN) and fine-tuning variables $GLITE_LB_AUTHZ_*.

.TP
\fBharvester\fR
If enabled, L&B harvester will use local L&B server.

.TP
\fBbdii\fR
Setup BDII service and gLite info provider wrappers for L&B. Start up of the BDII service is handled in \fBstartup\fR, if enabled.

Requires installed \fIbdii\fR, \fIsudo\fR, and \fIglite-info-provider-service\fR packages.

.TP
\fBemir\fR
Create service info file and setup emi-serp.

Requires installed \fIemird\fR or \fIemir-serp\fR package.

.TP
\fBupgrade\fR
Checks various old obsolete files to remove.

.TP
\fBcrl\fR
Setup fetch-crl to automatic fetching of CRLs.

.TP
\fBstartup\fR
Setup automatic start up of all enabled daemons after boot.

.TP
\fBkrb\fR (not default)
Setup Kerberos ticket and credential cache files for L&B.

Requires L&B built with Kerberos support.

.TP
\fBkrbgsi\fR (not default)
Setup Kerberos and enable GSI authentication.

Requires L&B built with Kerberos support and modified Globus and Kerberos libraries. Tested only with Heimdal implementation of Kerberos.

.SH FILES
\fI/etc/profile.d/gridenv.sh\fR
Environment variables for setup and start up scripts. This is for interoperability with YAIM configurator.

\fI/etc/sysconfig/glite-lb\fR
Environment variables for setup and start up scripts on RedHat-like distributions (RedHat, Scientific, Fedora, ...).

\fI/etc/default/glite-lb\fR
Environment variables for setup and start up scripts on Debian.

.SH ENVIRONMENT
See L&B Admin Guide, chapter 2.3.2 "Standard Installation".

.SH EXAMPLES

 Setup L&B server with both proxy and server mode on Scientific Linux with access for given gLite WMS:

 cat >> /etc/sysconfig/glite-lb <<EOF
 SITE_NAME=mysite
 SITE_EMAIL=email@example.com
 GLITE_LB_TYPE=both
 GLITE_LB_WMS_DN="/C=UG/L=Tropic/O=Utopia/OU=Relaxation/CN=wms.example.com"
 EOF

 mysqladmin -u root password [Edited]
 MYSQL_PASSWORD=[Edited] glite-lb-setup
 fetch-crl

.SH "SEE ALSO"
.PP

\fByaim\fR(1)
\fBglite-lb-bkindex\fR(8)
\fBglite-lb-bkserverd\fR(8)
\fBglite-lb-interlogd\fR(8)
\fBglite-lb-logd\fR(8)
\fBglite-lb-harvester\fR(8)

.SH AUTHOR
L&B Product Team, JRA1.
