.TH GLITE-LB-PURGE 1 "April 2008" "EGEE Project" "Logging&Bookkeeping"


.SH NAME
glite-lb-purge - utility for removing inactive jobs from the L&B database


.SH SYNOPSIS
.B glite-lb-purge
.RI [ options ]
.br


.SH DESCRIPTION
.B glite-lb-purge
is utility for removing inactive jobs from the L&B database. By default, it removes jobs that reached CLEARED, ABORTED and CANCELLED state and also OTHER and DONE jobs that are inactive for specific (rather long) time. It is a command line frontend to server internal purge. It is used by administrators of bkserver and it is not supposed to be used at the user level.

.B glite-lb-purge 
may be run periodically in order to avoid database overflow, however the periodic purges are done by server itself, so check the configuration of the server first.


.SH OPTIONS
.IP "-m, --server \fIbkserver\fR"
L&B server machine name. If not specified, the environment variable EDG_WL_QUERY_SERVER is beeing checked.

.IP "-a, --aborted \fiNNN[smhd]\fR"
Purge ABORTED jobs older than NNN seconds/minutes/hours/days (only one number and one letter allowed). If the time is not specified, the default timeout is determined by the server.

.IP "-c, --cleared \fiNNN[smhd]\fR"
Purge CLEARED jobs older than given time.

.IP "-n, --cancelled \fiNNN[smhd]\fR"
Purge CANCELLED jobs older than given time.

.IP "-e, --done \fiNNN[smhd]\fR"
Purge DONE jobs older than given time.

.IP "-o, --other \fiNNN[smhd]\fR"
Purge OTHER (i.e. job in other state than ABORTED, CLEARED or CANCELLED) jobs older than given time.

.IP "-r, --dry-run"
Do not really purge.

.IP "-j, --jobs \fIfilename\fR"
Input file with jobIds of jobs to purge.

.IP "-l, --return-list"
Return list of jobid matching the purge/dump criteria.

.IP "-s, --server-dump"
Dump jobs at the server into a file (see bkserverd).

.IP "-i, --client-dump"
Receive stream of dumped jobs (NOT implemented yet!).

.IP "-h, --help"
Display help.

.IP "-v, --version"
Display version.

.IP "-d, --debug"
Print diagnostics on the \fIstderr\fR.

.IP "-x, --proxy"
Purge L&B proxy.

.IP "-X, --sock \fIpath\fR"
Purge L&B proxy using given socket path.

.IP "-t, --target-runtime \fiNNN[smhd]\fR"
Throttle purge to the estimated target runtime.

.IP "-b, --background \fiN\fR"
Purge on the background. Default 1 when throttled purging.


.\".SH EXAMPLES
.\"To appear :o(


.SH FILES
No configuration files needed.


.SH ENVIRONMENT
.TP
.B EDG_WL_QUERY_SERVER
If 
.RB $ EDG_WL_QUERY_SERVER
is set, its value is used as the bkserver address.


.SH REPORTING BUGS
Please, report all bugs to EGEE Bug Tracking System located at https://savannah.cern.ch


.SH SEE ALSO
\fBglite-lb-bkindex\fP(8), \fBglite-lb-bkserverd\fP(8), \fBglite-lb-interlogd\fP(8), \fBglite-lb-logd\fP(8), \fBglite-lb-logevent\fP(1), \fBglite-lb-dump\fP(1), \fBglite-lb-load\fP(1)


.SH AUTHOR
EU EGEE, JRA1.
